<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>App</title>
  <link rel="stylesheet" href="app.css">
</head>
<body>
  <!-- Left Column -->
  <div class="column">
    <p>Total Cost</p>
    <input type="number" id="totalCost"> <span>MMK</span>
    <p>Total Profit</p>
    <input type="number" id="totalProfit"> <span>MMK</span>
    <p id="PR">Profit Rate : </p>
    <br><br>
    <p>X Total Invest</p>
    <input type="number" id="xInvest"> <span>MMK</span>
    <br><br>
    <button id="cal" onclick="click_for_X()">Calculate</button>
    <br>
    <p id="ExceedInvest">X Exceeded Invest :</p>
    <p id="InvestUsage" class="InvestUsage">Actual Usage of X Invest :</p>
    <br><br>
<!-- <br> -->
    <p id="XP"> Invested percentage of X : </p>
    <p id="XS" class="XS"> Profit share of X : </p>
    <p id="XR"> X Profit Rate : </p>
    <p id="XF"> Formula of X : (Total Profit) x (Total invested percentage of X) x 30% </p>
    <br>
  </div>

  <script>
    const click_for_X = () => {
      let totalCost = parseFloat(document.getElementById(`totalCost`).value);
      let totalProfit = parseFloat(document.getElementById(`totalProfit`).value);
      let PR = document.getElementById(`PR`);
      let xInvestElement = document.getElementById(`xInvest`);
      let XP = document.getElementById(`XP`);
      let XS = document.getElementById(`XS`);
      let XR = document.getElementById(`XR`);
      let XF = document.getElementById(`XF`);
      let ExceedInvest = document.getElementById(`ExceedInvest`);
      let InvestUsage = document.getElementById(`InvestUsage`);
      let xInvest = 0;
      let CXP = 0;
      let CXS = 0;
      let CXR = 0;

      // Profit Rate Calculation
      let CPR = (totalProfit / totalCost) * 100;
      PR.innerText = `Profit Rate : ${CPR % 1 === 0 ? CPR : CPR.toFixed(2)}%`;

      // Handle X Investments
      if (xInvestElement) {
        let xInvestELV = xInvestElement.value;
        if (xInvestELV <= totalCost) {
          xInvest = xInvestELV;
          ExceedInvest.innerText = `X Exceeded Invest : 0 MMK`;
          InvestUsage.innerText = `Actual Usage of X Invest : ${xInvestELV} MMK`;
        }
        if (xInvestELV > totalCost) {
          xInvest = totalCost;
          ExceedInvest.innerText = `X Exceeded Invest : ${xInvestELV - totalCost} MMK`;
          InvestUsage.innerText = `Actual Usage of X Invest : ${totalCost} MMK`;
        }
        CXP = (xInvest / totalCost) * 100;
        XP.innerText = `Invested percentage of X : ${CXP % 1 === 0 ? CXP : CXP}%`;
        XF.innerText = `Formula of X : ${totalProfit} x ${(CXP / 100)} x 0.3`;

        CXS = totalProfit * (CXP / 100) * 0.3;
        XS.innerText = `Profit share of X : ${CXS % 1 === 0 ? CXS : CXS.toFixed(2)} MMK`;

        CXR = (CXS / xInvest) * 100;
        XR.innerText = `X Profit Rate : ${CXR % 1 === 0 ? CXR : CXR.toFixed(2)}%`;
      }
    };
  </script>

</body>
</html>
